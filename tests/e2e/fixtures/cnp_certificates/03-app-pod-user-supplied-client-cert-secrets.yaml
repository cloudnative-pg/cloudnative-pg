apiVersion: v1
kind: Pod
metadata:
  name: app-pod-user-supplied-cert
spec:
  containers:
    - image: quay.io/leonardoce/webtest:1.3.0
      name: app-pod-user-supplied-cert
      volumeMounts:
        - name: secret-volume-root-ca
          mountPath: /etc/secrets/ca
        - name: secret-volume-tls
          mountPath: /etc/secrets/tls
      ports:
        - containerPort: 8080
  volumes:
    - name: secret-volume-root-ca
      secret:
        # default server root CA secret ie. '<cluster-name>-ca'
        secretName: postgresql-cert-ca
        defaultMode: 0600
    - name: secret-volume-tls
      secret:
        # user supplied client certificate secret
        secretName: app-user-cert
        defaultMode: 0600
