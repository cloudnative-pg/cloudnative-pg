apiVersion: v1
kind: Pod
metadata:
  name: app-pod
spec:
  containers:
    - image: quay.io/leonardoce/webtest:1.3.0
      name: app-pod
      volumeMounts:
        - name: secret-volume-root-ca
          mountPath: /etc/secrets/ca
        - name: secret-volume-tls
          mountPath: /etc/secrets/tls
      ports:
        - containerPort: 8080
  volumes:
    - name: secret-volume-root-ca
      secret:
        secretName: postgresql-cert-ca
        #secret name should match cluster initials
        defaultMode: 0600
    - name: secret-volume-tls
      secret:
        secretName: cluster-cert
        defaultMode: 0600
